<script type="module">
    import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"

    Chatbot.init({
        chatflowid: "2fde307e-7613-4b3d-b791-abb0ebdcf8e6",
        apiHost: "https://ai.sevnodes.es",
        chatflowConfig: {},
        observersConfig: {},

        theme: {

            /* BOTÃ“N FLOTANTE */
            button: {
                backgroundColor: "#800020", 
                right: 100,
                bottom: 100,
                size: 65,
                dragAndDrop: true,
                iconColor: "#FFFFFF",
                customIconSrc: "https://cdn-icons-png.flaticon.com/128/18355/18355222.png",
                autoWindowOpen: {
                    autoOpen: true,
                    openDelay: 20,
                    autoOpenOnMobile: false
                }
            },

            /* TOOLTIP */
            tooltip: {
                showTooltip: true,
                tooltipMessage: "Â¿Necesitas ayuda? ðŸ‘‹",
                tooltipBackgroundColor: "#0A1F44",
                tooltipTextColor: "#FFFFFF",
                tooltipFontSize: 15
            },

            /* DISCLAIMER LEGAL */
            disclaimer: {
                title: "Aviso Legal",
                message: `
                    Al utilizar este asistente aceptas nuestras 
                    <a target="_blank" href="https://www.snwhitehosting.com/es/terms/">Condiciones de Uso</a>, 
                    <a target="_blank" href="https://www.snwhitehosting.com/es/privacy-policy/">PolÃ­tica de Privacidad</a> 
                    y 
                    <a target="_blank" href="https://www.snwhitehosting.com/es/cookies/">PolÃ­tica de Cookies</a>.
                `,
                textColor: "#0A1F44",
                buttonColor: "#800020",
                buttonText: "Aceptar y continuar",
                buttonTextColor: "#FFFFFF",
                blurredBackgroundColor: "rgba(0,0,0,0.55)",
                backgroundColor: "#FFFFFF"
            },

            /* ================================================
               CSS PERSONALIZADO (CORRECCIÃ“N TOTAL DEL ICONO)
               ================================================ */
            customCSS: `

                /* Evitar que el botÃ³n limite el tamaÃ±o del icono */
                .flowise-launcher {
                    overflow: visible !important;
                }

                /* Deshacer padding, bordes y estilos heredados */
                .flowise-launcher * {
                    padding: 0 !important;
                    margin: 0 !important;
                    background: transparent !important;
                    border: none !important;
                    box-shadow: none !important;
                }

                /* Imagen REAL del botÃ³n flotante 
                   Basado en el HTML real que enviaste:
                   <img alt="Bubble button icon" style="width:39px;height:39px;"> 
                */
                .flowise-launcher img[alt="Bubble button icon"] {
                    width: 100% !important;
                    height: 100% !important;
                    max-width: none !important;
                    max-height: none !important;
                    padding: 0 !important;
                    margin: 0 !important;
                    border: none !important;
                    background: transparent !important;

                    /* Ignorar estilos inline de Flowise */
                    inline-size: auto !important;
                    block-size: auto !important;

                    /* TamaÃ±o aumentado del icono */
                    transform: scale(1.25) !important;
                    transform-origin: center !important;

                    /* Ajuste visual */
                    object-fit: contain !important;
                    object-position: center center !important;
                }

                /* Ajustar tooltip para que no empuje el botÃ³n */
                .flowise-tooltip {
                    transform: translateY(-10px) !important;
                }

                /* ---- ESTILOS DEL CHAT ---- */

                .flowise-chatbot-header img,
                .flowise-bot-avatar img,
                .flowise-avatar img {
                    border-radius: 0 !important;
                    background: #FFFFFF !important;
                    padding: 5px !important;
                    border: 1px solid #0A1F44 !important;
                }

                .flowise-chatbot-container,
                .flowise-chat-window,
                .flowise-chatbot {
                    border-radius: 0 !important;
                    border: 1px solid #0A1F44 !important;
                }

                ::-webkit-scrollbar {
                    width: 9px;
                }
                ::-webkit-scrollbar-thumb {
                    background-color: #0A1F44;
                    border-radius: 0px;
                }

                .flowise-chatbot-header {
                    background-color: #800020 !important;
                    color: #FFFFFF !important;
                }

                .flowise-send-button {
                    background-color: #800020 !important;
                    color: #FFFFFF !important;
                }

                .flowise-send-button:hover {
                    background-color: #99002A !important;
                }
            `,

            /* CHAT WINDOW */
            chatWindow: {
                showTitle: true,
                showAgentMessages: true,
                title: "Asistente SN WHITE HOSTING",
                titleAvatarSrc: "https://cdn-icons-png.flaticon.com/128/18355/18355222.png",
                welcomeMessage: "Â¡Hola! Soy el asistente oficial de SN WHITE HOSTING. Â¿En quÃ© puedo ayudarte hoy?",
                errorMessage: "Ha ocurrido un error. Por favor, intÃ©ntalo nuevamente.",
                backgroundColor: "#FFFFFF",
                height: 720,
                width: 430,
                fontSize: 16,

                starterPrompts: [
                    "Â¿QuÃ© planes de hosting ofrecÃ©is?",
                    "Â¿CÃ³mo puedo registrar un dominio?",
                    "Â¿TenÃ©is soporte tÃ©cnico 24/7?",
                    "Necesito un plan para empresas",
                ],
                starterPromptFontSize: 15,
                clearChatOnReload: false,
                sourceDocsTitle: "Fuentes:",
                renderHTML: true,

                botMessage: {
                    backgroundColor: "#FFFFFF",
                    textColor: "#0A1F44",
                    showAvatar: true,
                    avatarSrc: "https://cdn-icons-png.flaticon.com/128/18355/18355222.png"
                },

                userMessage: {
                    backgroundColor: "#800020",
                    textColor: "#FFFFFF",
                    showAvatar: true,
                    avatarSrc: "https://cdn-icons-png.flaticon.com/128/3177/3177440.png"
                },

                textInput: {
                    placeholder: "Escribe tu mensaje...",
                    backgroundColor: "#FFFFFF",
                    textColor: "#0A1F44",
                    sendButtonColor: "#800020",
                    maxChars: 400,
                    maxCharsWarningMessage: "Has superado el lÃ­mite de 400 caracteres.",
                    autoFocus: true,
                    sendMessageSound: false,
                    receiveMessageSound: false
                },

                feedback: {
                    color: "#0A1F44"
                },

                dateTimeToggle: {
                    date: true,
                    time: true
                },

                footer: {
                    textColor: "#0A1F44",
                    text: "By",
                    company: "SN WHITE HOSTING",
                    companyLink: "https://www.snwhitehosting.com/"
                }
            }
        }
    })
</script>
